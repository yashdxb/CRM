<app-auth-shell>
  <app-breadcrumbs></app-breadcrumbs>
  <!-- Login Card -->
  <div class="login-card">
    <div class="card-header">
      <div class="signal"></div>
      <div class="brand-logo">
        <img
          src="https://nedgtdal2.blob.core.windows.net/assets/branding/logo-v2.png"
          alt="North Edge CRM"
        />
      </div>
      <h1 class="card-title">Welcome Back</h1>
      <p class="card-subtitle">Sign in to continue to your account</p>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()" class="login-form">
      <div class="form-group">
        <label class="form-label">Email</label>
        <div class="input-wrapper" [class.focused]="emailFocused" [class.error]="form.get('email')?.touched && form.get('email')?.invalid">
          <i class="pi pi-envelope input-icon"></i>
          <input 
            pInputText 
            type="email" 
            formControlName="email" 
            placeholder="Enter your email"
            (focus)="emailFocused = true"
            (blur)="emailFocused = false"
          />
        </div>
        <span class="form-error" *ngIf="showErrors && form.get('email')?.invalid">
          <i class="pi pi-exclamation-circle"></i>
          Please enter a valid email
        </span>
      </div>

      <div class="form-group">
        <label class="form-label">Password</label>
        <div class="input-wrapper" [class.focused]="passwordFocused" [class.error]="form.get('password')?.touched && form.get('password')?.invalid">
          <i class="pi pi-lock input-icon"></i>
          <input 
            pInputText 
            type="password" 
            formControlName="password" 
            placeholder="Enter your password"
            (focus)="passwordFocused = true"
            (blur)="passwordFocused = false"
          />
        </div>
        <span class="form-error" *ngIf="showErrors && form.get('password')?.invalid">
          <i class="pi pi-exclamation-circle"></i>
          Minimum 6 characters required
        </span>
      </div>

      <div class="forgot-password">
        <a class="forgot-link">Forgot Password?</a>
      </div>

      <button pButton type="submit" class="btn-submit" [disabled]="loading">
        <span *ngIf="!loading">
          <i class="pi pi-sign-in"></i>
          Sign In
        </span>
        <span *ngIf="loading" class="loading-state">
          <i class="pi pi-spinner pi-spin"></i>
          Signing in...
        </span>
      </button>

      <div class="error-message" *ngIf="error">
        <i class="pi pi-times-circle"></i>
        <span>{{ error }}</span>
      </div>
    </form>

    <div class="card-footer">
      <span class="footer-text">Don't have an account?</span>
      <a routerLink="/landing" class="footer-link">
        Sign Up
        <i class="pi pi-arrow-right"></i>
      </a>
    </div>
  </div>
</app-auth-shell>
