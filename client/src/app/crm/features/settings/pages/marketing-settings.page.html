<div class="page-background">
  <div class="animated-orb orb-1"></div>
  <div class="animated-orb orb-2"></div>
  <div class="animated-orb orb-3"></div>
</div>

<div class="page-container marketing-settings-page">
  <div class="page-content">
    <app-breadcrumbs></app-breadcrumbs>

    <section class="hero-section">
      <div class="hero-content">
        <div class="hero-badge">
          <span class="badge-dot"></span>
          <span>Marketing Settings</span>
        </div>
        <h1 class="hero-title">
          <span class="title-gradient">Marketing Settings</span>
          <span class="title-light">Attribution Policy</span>
        </h1>
        <p class="hero-subtitle">Campaign Management currently uses one attribution policy across the tenant.</p>
        <div class="hero-actions">
          <button pButton type="button" class="crm-button crm-button--ghost" icon="pi pi-megaphone" label="Campaigns" (click)="openCampaigns()"></button>
          <button pButton type="button" class="crm-button crm-button--ghost" icon="pi pi-chart-line" label="Attribution" (click)="openAttribution()"></button>
        </div>
      </div>
      <div class="hero-visual">
        <div class="visual-card visual-card--primary">
          <div class="card-icon"><i class="pi pi-sparkles"></i></div>
          <div class="card-content">
            <span class="card-label">Current Model</span>
            <strong class="card-value">{{ attributionModel }}</strong>
            <span class="card-trend">One campaign credit per opportunity</span>
          </div>
          <div class="card-glow"></div>
        </div>
      </div>
    </section>

    <section class="metrics-dashboard">
      <div class="metrics-grid">
        <article class="metric-card metric-card--model">
          <div class="metric-header">
            <div class="metric-icon primary"><i class="pi pi-bolt"></i></div>
            <span class="metric-trend up"><i class="pi pi-check"></i> Active</span>
          </div>
          <span class="metric-label">Model</span>
          <strong class="metric-value">{{ attributionModel }}</strong>
        </article>
        <article class="metric-card metric-card--scope">
          <div class="metric-header">
            <div class="metric-icon info"><i class="pi pi-link"></i></div>
          </div>
          <span class="metric-label">Attribution Scope</span>
          <strong class="metric-value">Lead + Contact</strong>
        </article>
        <article class="metric-card metric-card--credit">
          <div class="metric-header">
            <div class="metric-icon warning"><i class="pi pi-chart-pie"></i></div>
          </div>
          <span class="metric-label">Credit Allocation</span>
          <strong class="metric-value">Single-touch</strong>
        </article>
      </div>
    </section>

    <section class="metrics-dashboard" *ngIf="pilotMetrics() as metrics">
      <div class="metrics-grid metrics-grid--pilot">
        <article class="metric-card metric-card--pilot">
          <div class="metric-header">
            <div class="metric-icon primary"><i class="pi pi-lightbulb"></i></div>
          </div>
          <span class="metric-label">Active Recommendations</span>
          <strong class="metric-value">{{ metrics.activeRecommendations }}</strong>
        </article>
        <article class="metric-card metric-card--pilot">
          <div class="metric-header">
            <div class="metric-icon success"><i class="pi pi-check-circle"></i></div>
          </div>
          <span class="metric-label">Acceptance Rate</span>
          <strong class="metric-value">{{ metrics.acceptanceRatePct }}%</strong>
        </article>
        <article class="metric-card metric-card--pilot">
          <div class="metric-header">
            <div class="metric-icon info"><i class="pi pi-list-check"></i></div>
          </div>
          <span class="metric-label">Action Tasks Created</span>
          <strong class="metric-value">{{ metrics.actionTasksCreated }}</strong>
        </article>
        <article class="metric-card metric-card--pilot">
          <div class="metric-header">
            <div class="metric-icon secondary"><i class="pi pi-mouse"></i></div>
          </div>
          <span class="metric-label">Impact Worklist Clicks</span>
          <strong class="metric-value">{{ metrics.impactWorklistClicks }}</strong>
        </article>
        <article class="metric-card metric-card--pilot">
          <div class="metric-header">
            <div class="metric-icon warning"><i class="pi pi-clock"></i></div>
          </div>
          <span class="metric-label">Avg Decision Hours</span>
          <strong class="metric-value">{{ metrics.avgDecisionHours }}</strong>
        </article>
      </div>
      <div class="pilot-summary">
        Decisions in 30 days:
        <strong>{{ metrics.acceptedCount }}</strong> accepted,
        <strong>{{ metrics.dismissedCount }}</strong> dismissed,
        <strong>{{ metrics.snoozedCount }}</strong> snoozed.
      </div>
    </section>

    <section class="data-card no-hover policy-card">
      <header class="data-card-header">
        <div>
          <h2 class="section-title">Attribution Model</h2>
          <p class="data-card-subtitle">MVP policy visibility for admins and marketing users</p>
        </div>
        <p-tag severity="info" value="Read-only"></p-tag>
      </header>
      <div class="policy-body">
        <p class="model-value">{{ attributionModel }}</p>
        <p class="model-description">{{ attributionDescription }}</p>
        <p class="policy-note">Out of MVP scope: multi-touch, weighted attribution, and time-decay models.</p>
      </div>
    </section>

    <section class="data-card no-hover">
      <header class="data-card-header">
        <h2 class="section-title">MVP Boundaries</h2>
      </header>
      <div class="scope-grid">
        <article class="scope-item">
          <h3 class="scope-title">Included</h3>
          <ul>
            <li>Campaign CRUD and member linking</li>
            <li>First-touch campaign attribution</li>
            <li>Influenced pipeline and won revenue reporting</li>
          </ul>
        </article>
        <article class="scope-item">
          <h3 class="scope-title">Excluded</h3>
          <ul>
            <li>Email automation and journey orchestration</li>
            <li>Multi-model attribution configuration</li>
            <li>Weighted or time-decay attribution logic</li>
          </ul>
        </article>
      </div>
    </section>
  </div>
</div>
