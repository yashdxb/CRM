
    <p-dialog
      header="Quick add"
      [(visible)]="visible"
      [modal]="true"
      [style]="{ width: '520px' }"
      [draggable]="false"
      [resizable]="false"
      styleClass="quick-add-dialog"
      (onHide)="close.emit()"
    >
      <div class="quick-add">
        <div class="quick-add__type">
          <label>Record type</label>
          <p-select
            [options]="quickAddTypes"
            optionLabel="label"
            optionValue="value"
            [(ngModel)]="quickAddType"
          ></p-select>
        </div>

        <div *ngIf="quickAddType === 'lead'" class="quick-add__grid">
          <div class="field">
            <label>Name</label>
            <input pInputText [(ngModel)]="quickAddLeadName" placeholder="Lead name" />
          </div>
          <div class="field">
            <label>Company</label>
            <input pInputText [(ngModel)]="quickAddLeadCompany" placeholder="Company" />
          </div>
          <div class="field">
            <label>Email</label>
            <input pInputText [(ngModel)]="quickAddLeadEmail" placeholder="name@company.com" />
          </div>
          <div class="field">
            <label>Phone</label>
            <input pInputText [(ngModel)]="quickAddLeadPhone" placeholder="+1 555 000 0000" />
          </div>
        </div>

        <div *ngIf="quickAddType === 'contact'" class="quick-add__grid">
          <div class="field">
            <label>Name</label>
            <input pInputText [(ngModel)]="quickAddContactName" placeholder="Contact name" />
          </div>
          <div class="field">
            <label>Account</label>
            <p-select
              [options]="accountOptions()"
              optionLabel="label"
              optionValue="value"
              [(ngModel)]="quickAddContactAccountId"
              placeholder="Select account"
            ></p-select>
          </div>
          <div class="field">
            <label>Email</label>
            <input pInputText [(ngModel)]="quickAddContactEmail" placeholder="name@company.com" />
          </div>
          <div class="field">
            <label>Phone</label>
            <input pInputText [(ngModel)]="quickAddContactPhone" placeholder="+1 555 000 0000" />
          </div>
        </div>

        <div *ngIf="quickAddType === 'activity'" class="quick-add__grid">
          <div class="field">
            <label>Subject</label>
            <input pInputText [(ngModel)]="quickAddActivitySubject" placeholder="Follow up call" />
          </div>
          <div class="field">
            <label>Type</label>
            <p-select
              [options]="activityTypeOptions"
              optionLabel="label"
              optionValue="value"
              [(ngModel)]="quickAddActivityType"
            ></p-select>
          </div>
          <div class="field">
            <label>Priority</label>
            <p-select
              [options]="activityPriorityOptions"
              optionLabel="label"
              optionValue="value"
              [(ngModel)]="quickAddActivityPriority"
            ></p-select>
          </div>
          <div class="field">
            <label>Due date</label>
            <p-datePicker [(ngModel)]="quickAddActivityDueDate"></p-datePicker>
          </div>
          <div class="field full">
            <label>Outcome</label>
            <textarea
              pTextarea
              [(ngModel)]="quickAddActivityOutcome"
              rows="2"
              placeholder="Capture outcome and key takeaways"
            ></textarea>
          </div>
          <div class="field">
            <label>Next step subject</label>
            <input pInputText [(ngModel)]="quickAddActivityNextStepSubject" placeholder="Follow-up task" />
          </div>
          <div class="field">
            <label>Next step due date</label>
            <p-datePicker [(ngModel)]="quickAddActivityNextStepDueDate"></p-datePicker>
          </div>
          <div class="field">
            <label>Related to</label>
            <p-select
              [options]="activityRelationOptions"
              optionLabel="label"
              optionValue="value"
              [(ngModel)]="quickAddActivityRelationType"
              (ngModelChange)="onQuickAddRelationTypeChange($event)"
            ></p-select>
          </div>
          <div class="field" *ngIf="quickAddActivityRelationType === 'Account'">
            <label>Account</label>
            <p-select
              [options]="accountOptions()"
              optionLabel="label"
              optionValue="value"
              [(ngModel)]="quickAddActivityRelationId"
              placeholder="Select account"
            ></p-select>
          </div>
          <div class="field" *ngIf="quickAddActivityRelationType === 'Contact'">
            <label>Contact</label>
            <p-select
              [options]="contactOptions()"
              optionLabel="label"
              optionValue="value"
              [(ngModel)]="quickAddActivityRelationId"
              placeholder="Select contact"
            ></p-select>
          </div>
          <div class="field" *ngIf="quickAddActivityRelationType === 'Opportunity'">
            <label>Opportunity</label>
            <p-select
              [options]="opportunityOptions()"
              optionLabel="label"
              optionValue="value"
              [(ngModel)]="quickAddActivityRelationId"
              placeholder="Select opportunity"
            ></p-select>
          </div>
        </div>
      </div>
      <ng-template pTemplate="footer">
        <button pButton type="button" class="crm-button crm-button--ghost" label="Cancel" (click)="close.emit()"></button>
        <button
          pButton
          type="button"
          class="crm-button crm-button--primary"
          label="Create"
          [disabled]="saving() || !canSubmitQuickAdd()"
          (click)="submitQuickAdd()"
        ></button>
      </ng-template>
    </p-dialog>
  
